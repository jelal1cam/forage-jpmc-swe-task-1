From afa5e87055d90e5dc6e01ea025e29baa4bedfbf7 Mon Sep 17 00:00:00 2001
From: jelal1cam <jh2402@cam.ac.uk>
Date: Mon, 21 Aug 2023 15:47:14 +0100
Subject: [PATCH] unit tests

---
 __pycache__/client3.cpython-311.pyc           | Bin 0 -> 2104 bytes
 .../client_test.cpython-311-pytest-7.4.0.pyc  | Bin 0 -> 3597 bytes
 client_test.py                                |  31 +++++++++++++++++-
 3 files changed, 30 insertions(+), 1 deletion(-)
 create mode 100644 __pycache__/client3.cpython-311.pyc
 create mode 100644 __pycache__/client_test.cpython-311-pytest-7.4.0.pyc

diff --git a/__pycache__/client3.cpython-311.pyc b/__pycache__/client3.cpython-311.pyc
new file mode 100644
index 0000000000000000000000000000000000000000..1e6c28a7da9ea7026526b0897e7983e3eb490318
GIT binary patch
literal 2104
zcmaJCOK2NMbXMA3t)h=D$9C*kp_71{D77s+A+4)AEw&|>l*F}@=Hn%eSZT)g%Cc73
zT_?3FgGhUj!3Pxr5i|uKN}7^OD23*jLXItHgCJrdAjl~<L3+xmZ&#LorJ2v$_h#O2
z-g`6qi_doeK|A-&D-r<gl|{6gZwq<ja3FLK5k#0Y5}RK}WNg|YI*CJMiBseV`#lnQ
z!U1$qf$&Qpg^*fzAnJyBfN~EQgdV|cw!Ksoef_uS0X~%Swm7IW)$##t`dh2Jzm(l<
z+fBD{(8Hv5EWz@l))v}pcQ3WszRk7^dGHQ-G2lir5<6%BP7o0fg5^$naIaPd!79Ih
z^*W1?*d=z0hr}M*Lpx~K7}&AoiHmmq$Pj^c19a0v01wa}fS#Y+`!#QTVoP`dx@ZUS
z^=|tOlz)eM0NHqCXT)O2@n~NhY#%#m$A9$yMVL#F`AaC&_SzDi&K+IU^=u>@PAf?%
zy{Kq<WOR6RIDB)3s;i&L<m|U=@;?y!<aYc)3eJk0FyGt<a1Xgr9(3+_x5ntZxM9z+
zvqzje_+IbU9Q&l$9nN=1IrEOZGY5VUF6TjLjm<OGN}io(;go#tBRr!jWF<+llul!P
zk>U)cgc5v9O0Q52>k3|=8LCP;a9|?oQdW^OIyN~?SCUJnOINb-giK5>tIA2*q$O?X
zwH5vlV{-FpMbbl@$=zI0bgEjhG2I{#Z}Pi=w~4BdCZuryu+`pv8NRGhRSTzRT1r!$
z$eG1evZ^Y#!cnR%f!XjEGZz$fLCVB0U5$n36;)cGgQ@Ita!|WX2X#<9I1)~#Wt!1X
z4`o+P?*i4MaDW->0IGGxuw_vMP(XEdtmX}rj&DpCVlUgfO0;~g+Wr3K?P_<}XdkY&
z4;Rk;&vMPzUG6n}$2KLyd%O^<dD=^%^4vqN;u);4gKt1PN^aL85LRW_)e!;2t`3GU
zTkl8P?i>@x-U_(GSe2A#tUN;QoVjE8bE;!VjjUj09@_zpOIXT~Ej)o$%W@7!<y*2Q
zD;b<v#W|`fSk`bx(Q#JMG&zx`kf?wN>n*;Rsw!&8VY;?-wvdEo>BCsHo+?v-fL^q$
ztDQiegsFW1pczb;zjX9YzL0<Ef3Jck4F6=+KUonb>w>rL=_p+_Ji!VZRILZi6yot^
zNzTOMIoGUJBn0Q&SkmzcD3eHzAHa~xNKP1No+|Q|3FQRaF7DS%=lH~=>5RsvLcJ!N
z(v*zJs}KQY+4Qfd>9m{}QYqY4O*i=_ZE~}hV;AR4X4<X++jq-_jI>PSag&vyN=*)Q
zEKrk)n;g_H(M(rMiwm?USqf&L;+7@dWK}8=lef!TGkH5=nri)N>^lLaX4Sk3Nkgjj
z+S_&hE3%Jn$MLN&whUJ=O+Qr!VBdNhwC?~moD9P>P9nxz@L0Wud<DDLP*<fj8a#3j
z6gc>BLV;=UE@r5Kwn3-B9BH6!(1TcSG56frTXFW*eSzXvrT$WXnfc+w-4p9KHf}VK
zm+Q7ck*NjxN}YEPm#6MezX+as9z6B<%pYUFjXm`}<)8WfY<t#boSvzko-u;6)!^)l
z;FagWD@O2IHF(Vk%vA$(MZPXf)&d8Me66dmfmk<Tny?syYgUYv`q$5IoG+fQjhuZP
zd_s+pXmuoNc!yx;<Ffp)s}?+3oGP7JzhHA0V^3DB{#3SlWmeo8*QH8xbR-OKvg%D%
z>`@ndMXs1CkCsO_ryid9`NHE5pY;EJ*616r_Kh3<aYLA>3KJD!qGmJBulqK9Md*zq
Ph&>FUX|Sz0*h%^qC^HQZ

literal 0
HcmV?d00001

diff --git a/__pycache__/client_test.cpython-311-pytest-7.4.0.pyc b/__pycache__/client_test.cpython-311-pytest-7.4.0.pyc
new file mode 100644
index 0000000000000000000000000000000000000000..845a9f80b75c996533c73382d62f95965c1248c7
GIT binary patch
literal 3597
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
O_*D{#v>yyS`kw)er(Q|`

literal 0
HcmV?d00001

diff --git a/client_test.py b/client_test.py
index 09171cf..eb9cc5c 100644
--- a/client_test.py
+++ b/client_test.py
@@ -1,5 +1,5 @@
 import unittest
-from client3 import getDataPoint
+from client3 import getDataPoint, getRatio
 
 class ClientTest(unittest.TestCase):
   def test_getDataPoint_calculatePrice(self):
@@ -8,6 +8,8 @@ class ClientTest(unittest.TestCase):
       {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
     ]
     """ ------------ Add the assertion below ------------ """
+    for quote in quotes:
+       self.assertEqual(getDataPoint(quote), (quote['stock'], quote['top_bid']['price'], quote['top_ask']['price'], (quote['top_bid']['price'] +quote['top_ask']['price']) * 0.5))
     
 
   def test_getDataPoint_calculatePriceBidGreaterThanAsk(self):
@@ -16,11 +18,38 @@ class ClientTest(unittest.TestCase):
       {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
     ]
     """ ------------ Add the assertion below ------------ """
+    for quote in quotes:
+       self.assertEqual(getDataPoint(quote), (quote['stock'], quote['top_bid']['price'], quote['top_ask']['price'], (quote['top_bid']['price'] +quote['top_ask']['price']) * 0.5))
 
 
   """ ------------ Add more unit tests ------------ """
+  def test_getRatio(self) :
+    quotes_ratio = [
+      {'top_ask': {'price': 119.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
+      {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
+    ]
+    
+    quotes_zero = [
+      {'top_ask': {'price': 119.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
+      {'top_ask': {'price': 0, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 0, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
+    ]
+  
+    prices_ratio = {}
+    for quote in quotes_ratio:
+      stock, bid_price, ask_price, price = getDataPoint(quote)
+      prices_ratio[stock] = price
+      print("Quoted %s at (bid:%s, ask:%s, price:%s)" % (stock, bid_price, ask_price, price))
+      print(prices_ratio)
 
+    self.assertEqual(getRatio(prices_ratio['ABC'], prices_ratio['DEF']), (prices_ratio['ABC']/prices_ratio['DEF']))
 
+    prices_zero = {}
+    for quote in quotes_zero:
+      stock, bid_price, ask_price, price = getDataPoint(quote)
+      prices_zero[stock] = price
+      print("Quoted %s at (bid:%s, ask:%s, price:%s)" % (stock, bid_price, ask_price, price))
+      print(prices_zero)
+    self.assertRaises(ZeroDivisionError('Division by zero is not possible'), getRatio(prices_zero['ABC'], prices_zero['DEF']))
 
 if __name__ == '__main__':
     unittest.main()
-- 
2.39.2 (Apple Git-143)

